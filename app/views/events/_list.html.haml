.span12
  .masonry_layout.centered
    - for event in @events
      - pwidth = event.photo_dimensions["poster"][0]
      - pheight = event.photo_dimensions["poster"][1]
      - if pwidth > 200
        - pheight = pheight * 1.0
        -# lo que sobresale con respecto al ancho de una columna
        - pwidht_dif = (pwidth / 200.0) - (pwidth / 200)
        - if pwidht_dif < 0.25
          -#   -# redondear el ancho a la columna
          - pratio = pwidth / pheight
          - pwidth = ((pwidth / 200) * 200 ) + (((pwidth / 200)-1) * 10)
          - pheight = pwidth / pratio

      -# - if pwidth > 200
      -#   - pratio = pwidth / pheight
      -#   -# redondear el ancho a columnas
      -#   - pwidth = ((pwidth / 200).round) * 200
      -#   - pheight = pwidth / pratio
      - poster_style = posterStyle
      .poster{ :style => "width: #{pwidth+40}px; height: #{pheight+40}px;"}
        .poster-front
          %div{:class => "paper #{poster_style}", :style => "width: #{pwidth}px; height: #{pheight}px;"}
            = image_tag event.photo.url(:poster)
        .poster-back
          -#{:class => "paper #{poster_style}"}
          -# background-color:rgba(102,102,102,0.8);
          -# %div{ :style=>"width: #{pwidth}px; height: #{pheight}px;"}
          %div
            .caption
              %h4
                = event.name
            .botones
              %p
                = link_to event, :class => "btn" do
                  %i.icon-info-sign
                  Más información
              %i.icon-comment 5 Comentarios
      -# .poster{:style => "width: #{event.photo_dimensions["poster"][0]}px; height: #{event.photo_dimensions["poster"][1]}px"}
      -# background: url(#{event.photo.url(:poster)}) repeat;
      -# .poster{ :style => "width: #{pwidth}px; height: #{pheight}px;"}
      -#   = image_tag event.photo.url(:poster)
      -# .poster.flip{ :style => "width: #{pwidth}px; height: #{pheight}px;"}
      -#   -# .botones
      -#   -#   %p
      -#   -#     %a.btn{:href => "#"}
      -#   -#       %i.icon-thumbs-up.icon-white
      -#   -#       ¡Unirme!
      -#   -#   %p
      -#   -#     = link_to event, :class => "btn" do
      -#   -#       %i.icon-info-sign
      -#   -#       Más información
      -#   - poster_style = posterStyle
      -#   .flip-front
      -#     %div{:class => "paper #{poster_style}", :style => "width: #{pwidth}px; height: #{pheight}px;"}
      -#       = image_tag event.photo.url(:poster)
      -#   .flip-back
      -#     -#{:class => "paper #{poster_style}"}
      -#     -# background-color:rgba(102,102,102,0.8);
      -#     -# %div{ :style=>"width: #{pwidth}px; height: #{pheight}px;"}
      -#     .caption
      -#       %h4
      -#         = event.name
      -#     .extra-info
      -#       %p
      -#         %a{:href => user_path(event.creator)}
      -#           %i.icon-user
      -#           = event.creator.complete_name
      -#       %p
      -#         %i.icon-calendar
      -#         = l(event.start_date, :format => :long)+', '+l(event.start_time, :format => :short)
      -#       %p
      -#         %i.icon-map-marker
      -#         = event.place
      -#       %i.icon-thumbs-up
      -#       = "#{event.appointments_count ? event.appointments_count.round : 0} Unidos"
      -#       %i.icon-comment 5 Comentarios


      -# .box
      -#   .thumbnail
      -#     .botones
      -#       %p
      -#         %a.btn{:href => "#"}
      -#           %i.icon-thumbs-up.icon-white
      -#           ¡Unirme!
      -#       %p
      -#         = link_to event, :class => "btn" do
      -#           %i.icon-info-sign
      -#           Más información

      -#     -# = image_tag event.photo.url(:small)
      -#     .caption
      -#       %h4
      -#         = event.name
      -#       .extra-info
      -#         %p
      -#           %a{:href => user_path(event.creator)}
      -#             %i.icon-user
      -#             = event.creator.complete_name
      -#         %p
      -#           %i.icon-calendar
      -#           = l(event.start_date, :format => :long)+', '+l(event.start_time, :format => :short)
      -#         %p
      -#           %i.icon-map-marker
      -#           = event.place
      -#         %i.icon-thumbs-up
      -#         = "#{event.appointments_count ? event.appointments_count.round : 0} Unidos"
      -#         %i.icon-comment 5 Comentarios